/*! For license information please see modal.min.js.LICENSE.txt */
void 0===Craft.EntryTemplates&&(Craft.EntryTemplates={}),Craft.EntryTemplates.Modal=Garnish.Base.extend({$settings:null,$elements:{},$default:{},init(t){Object.defineProperty(this.$elements,"__esModule",{value:!0}),this.$settings=t,console.log(t),this.$elements.default=class{constructor(t){var e;this.id=t.id,this.title=t.title,this.preview=null!==(e=t.preview)&&void 0!==e?e:1,this.$button=$(this._button())}_button(){const t=$("<button />").append($("<p />").text(this.title)),e=$("<div />").appendTo(t);switch(this.preview){case 0:t.addClass("is-blank");break;case 1:t.addClass("is-empty");break;default:e.append($("<img />").attr("src",this.preview))}return t}},this._addDefault(),this._createModal()},_button(){const t=$("<button />").append($("<p />").text(this.title));return $("<div />").appendTo(t),t},_addDefault(){Object.defineProperty(this.$default,"__esModule",{value:!0}),this.$default.default={0:"Blank",Blank:0}},_createModal(){const t=$('<div class="modal templates_modal" />');this.garnishModal=new Garnish.Modal(t);const e=$('<div class="body" />').appendTo(t).append($('<h2 class="modal_heading" />').text(Craft.t("entrytemplates","Choose a template"))),a=$('<div class="modal_container" />').appendTo(e),s=this.$elements,n=this.$settings;this.$default,this.contentTemplates=[new s.default({title:Craft.t("entrytemplates","Blank"),preview:this.$default.default.Blank})],this.contentTemplates.push(...n.entryTemplates.map((t=>new s.default(t)))),this.contentTemplates.forEach((e=>{$('<div class="modal_block" />').append(e.$button).appendTo(a),e.$button.on("activate",(a=>{if(void 0===e.id)this.garnishModal.hide();else{t.addClass("applying");const a={elementId:n.elementId,entryTemplateId:e.id};Craft.sendActionRequest("POST","entrytemplates/templates/apply",{data:a}).then((t=>{window.location.href=t.data.redirect})).catch((e=>{var a;t.removeClass("applying"),Craft.cp.displayError(null!==(a=e.error)&&void 0!==a?a:Craft.t("entrytemplates","An unknown error occurred."))}))}}))}))}});