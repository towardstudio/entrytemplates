/*! For license information please see index.min.js.LICENSE.txt */
void 0===Craft.EntryTemplates&&(Craft.EntryTemplates={}),Craft.EntryTemplates.TemplateIndex=Craft.BaseElementIndex.extend({$newTemplateBtnGroup:null,$newTemplateBtn:null,init(t,e,n){this.on("selectSource",this.createButton.bind(this)),this.on("selectSite",this.createButton.bind(this)),this.base(t,e,n)},afterInit:function(){this.entryTypes=Craft.sendActionRequest("POST","entrytemplates/templates/types").catch((t=>console.warn("Unable to get entry types")))},createButton:function(){null!==this.$source&&(null!==this.$newTemplateBtnGroup&&this.$newTemplateBtnGroup.remove(),this.$newTemplateBtnGroup=$('<div class="btngroup submit" data-wrapper/>'),this.$newTemplateBtn=Craft.ui.createButton({label:Craft.t("entrytemplates","New template"),spinner:!0}).addClass("submit add icon").appendTo(this.$newTemplateBtnGroup),this.addListener(this.$newTemplateBtn,"click",(()=>{this._createTemplate()})),this.addButton(this.$newTemplateBtnGroup))},_createTemplate:async function(){const t=this.$source.data("handle");let e=await this.entryTypes;e=e.data.sections,e=e.flatMap((t=>t.entryTypes.map((e=>Object.assign(Object.assign({},e),{section:t}))))),e=e.find((e=>void 0!==e.section&&e.section.handle+"/"+e.handle===t)),Craft.sendActionRequest("POST","entrytemplates/templates/create",{data:{siteId:this.siteId,entryType:e.handle,section:e.section.handle}}).then((({data:t})=>{document.location.href=Craft.getUrl(t.cpEditUrl,{fresh:1})}))}}),Craft.registerElementIndexClass("towardstudio\\entrytemplates\\elements\\EntryTemplate",Craft.EntryTemplates.TemplateIndex);